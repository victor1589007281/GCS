--disable_query_log
CREATE DATABASE IF NOT EXISTS test_db1 DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;
CREATE SCHEMA IF NOT EXISTS test_db2 DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;
CREATE DATABASE IF NOT EXISTS test_db3;
CREATE SCHEMA IF NOT EXISTS test_db4;
--error ER_DB_CREATE_EXISTS
CREATE DATABASE test_db1;
--error ER_DB_CREATE_EXISTS
CREATE DATABASE test_db2;
--error ER_DB_CREATE_EXISTS
CREATE DATABASE test_db3;
--error ER_DB_CREATE_EXISTS
CREATE DATABASE test_db4;

USE test_db1;
--source suite/spider/inc/install_spider.inc
CREATE TABLE IF NOT EXISTS `t1`(
        `id` bigint(20) NOT NULL,
        `name` varchar(20) NOT NULL,
        PRIMARY KEY (`id`)
) ENGINE=SPIDER DEFAULT CHARSET=utf8 CONNECTION=' table "t1", user "root", password "root"'
/*!50100 PARTITION BY RANGE(id)
(PARTITION pt1 VALUES LESS THAN(10) COMMENT = 'host "10.132.74.40", port "20000"' ENGINE = SPIDER,
PARTITION pt2 VALUES LESS THAN MAXVALUE COMMENT = 'host "10.132.74.40", port "20001"' ENGINE = SPIDER) */;

CREATE TABLE IF NOT EXISTS `t2`(
        `id` bigint(20) NOT NULL,
        `name` varchar(20) NOT NULL,
        PRIMARY KEY (`id`)
) ENGINE=SPIDER DEFAULT CHARSET=utf8 CONNECTION=' table "t2", user "root", password "root"'
/*!50100 PARTITION BY RANGE(id)
(PARTITION pt1 VALUES LESS THAN(10) COMMENT = 'host "10.132.74.40", port "20001"' ENGINE = SPIDER,
PARTITION pt2 VALUES LESS THAN MAXVALUE COMMENT = 'host "10.132.74.40", port "20002"' ENGINE = SPIDER) */;

CREATE TABLE IF NOT EXISTS `t3` (
        `id` bigint(20) NOT NULL,
        `s_id` bigint(20) NOT NULL,
        `c_id` bigint(20) NOT NULL,
        PRIMARY KEY (`id`)
) ENGINE=SPIDER DEFAULT CHARSET=utf8 CONNECTION=' table "t3", user "root", password "root"'
/*!50100 PARTITION BY RANGE(id)
(PARTITION pt1 VALUES LESS THAN(10) COMMENT = 'host "10.132.74.40", port "20001"' ENGINE = SPIDER,
PARTITION pt2 VALUES LESS THAN MAXVALUE COMMENT = 'host "10.132.74.40", port "20002"' ENGINE = SPIDER) */;

--error ER_TABLE_EXISTS_ERROR
CREATE TABLE `t1`(id bigint(20) NOT NULL,
  PRIMARY KEY(`id`));
--error ER_TABLE_EXISTS_ERROR
CREATE TABLE `t2` (id bigint(20) NOT NULL, PRIMARY KEY(`id`));
--error ER_TABLE_EXISTS_ERROR
CREATE TABLE `t3` (id bigint(20) NOT NULL, PRIMARY KEY(`id`));

CREATE INDEX IDX_T1_NAME ON t1(name);
CREATE INDEX IDX_T2_NAME ON t2(name);
CREATE INDEX IDX_T3_S ON t3(s_id);
CREATE INDEX IDX_T3_C ON t3(c_id);
DROP INDEX IDX_T1_NAME ON t1;
DROP INDEX IDX_T2_NAME ON t2;
DROP INDEX IDX_T3_S ON t3;
DROP INDEX IDX_T3_C ON t3;

DROP TABLE IF EXISTS t1,t2,t3;
DROP DATABASE IF EXISTS test_db1;
DROP DATABASE IF EXISTS test_db2;
DROP DATABASE IF EXISTS test_db3;
DROP DATABASE IF EXISTS test_db4;
--enable_query_log
